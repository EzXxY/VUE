# 1. ä¸ºä»€ä¹ˆè¦å†™è¿™ä¹ˆä¸€ä¸ªé¡¹ç›®ï¼ŸğŸ¤”

&emsp;&emsp;ç½‘ä¸Šå¯ä»¥æ‰¾åˆ°çš„çƒ­é—¨çš„æ‰¹é‡æŸ¥è¯¢ IP çš„å·¥å…·æœ‰å‡ ç‚¹ä¸èƒ½æ»¡è¶³æˆ‘çš„éœ€æ±‚ï¼š

> â‘  ä¸æ”¯æŒæŸ¥è¯¢ IPv6 åœ°å€ï¼›

> â‘¡ æŸ¥å‡ºçš„ IPv4 æ‰€åœ¨åœ°åŒºä¹Ÿä¸å¤ªå‡†ç¡®ï¼›

> â‘¢ æŸ¥å‡ºçš„ IP æ²¡æœ‰å‚å•†åç§°åŠ ASN ä¿¡æ¯ï¼›

> â‘£ ç»™çš„åœ¨çº¿è¡¨æ ¼ç»“æœç›´æ¥å¤åˆ¶æŸåˆ—çš„ IP ä¹Ÿå¾ˆä¸æ–¹ä¾¿ï¼›

> â‘¤ æ²¡å†™é»‘å¤œæ¨¡å¼ã€åˆºçœ¼ï¼ğŸ˜‚

&emsp;&emsp;æˆ‘å‘ç° [ipinfo.io](https://ipinfo.io) çš„æ•°æ®åº“å¾ˆå‡†ç¡®ã€æ”¯æŒæŸ¥è¯¢ IPv6ã€è°ƒç”¨å…¶ API å¯ä»¥è·å¾— IP çš„å‚å•†ä¿¡æ¯åŠ ASN ç­‰ä¿¡æ¯ã€‚é‚£å°±å¹²è„†è‡ªå·±æ‰‹æ’¸ä¸€ä¸ªå‰ç«¯ VUE é¡µé¢ï¼Œè‡ªå·±å†™æŒ‰ç…§åœ°åŒºå’Œ ASN åˆ†ç±»çš„è¡¨æ ¼å‡½æ•°ï¼Œä¹Ÿæ”¯æŒè¡¨æ ¼é‡Œä¸€è¡Œä¸€ä¸ªçš„ IP ç›´æ¥å¤åˆ¶ã€‚æ»¡è¶³äº†è‡ªå·±çš„éœ€æ±‚ï¼Œå¦‚æœä½ ä¹Ÿæƒ³æœ‰ä¸€ä¸ªè¿™æ ·çš„æ‰¹é‡ IP æŸ¥è¯¢ç«™ï¼Œé‚£å¯ä»¥ç”¨ Docker åœ¨è‡ªå·±çš„æœºå™¨ä¸Šéƒ¨ç½²ä¸€ä¸ªç©ç©å„¿~ã€‚

&emsp;ã€[æˆ‘çš„æ­¤é¡¹ç›® GitHub å¼€æºåœ°å€ï¼ˆå°±åœ¨è¿™é‡Œï¼‰](https://github.com/EzXxY/VUE)ã€‘&emsp;ã€[æˆ‘çš„æ­¤é¡¹ç›® Docker Hub é•œåƒåœ°å€](https://hub.docker.com/r/ezxxy/vue-ip/tags)ã€‘

ï¼ˆæ¬¢è¿ä¸‹è½½æºç ï¼Œè‡ªå·±ä¿®æ”¹ CSS æ ·å¼ç­‰ï¼Œå¯ä»¥ç»™æˆ‘æ¥ä¸€ä¸ªå…è´¹çš„ âœ¨StarğŸŒŸ å‘¦ï¼~ï¼‰

> &emsp;ç®€å•çœ‹çœ‹ç”¨ **ç«™é•¿ä¹‹å®¶** å’Œ **UUåœ¨çº¿å·¥å…·** æ‰¹é‡æŸ¥ IP çš„***ç—›ç‚¹ï¼***ï¼ˆå¦‚æœæœ‰å…¶ä»–å¥½ç”¨çš„ï¼Œè¯·æIssuesï¼Œè°¢è°¢~ï¼‰

![ç«™é•¿ä¹‹å®¶æŸ¥IP.png](https://ezxxy.github.io/img/04-æ‰¹é‡æŸ¥è¯¢IPåœ°åŒº/ç«™é•¿ä¹‹å®¶æŸ¥IP.png)
![UUåœ¨çº¿å·¥å…·æŸ¥IP.png](https://ezxxy.github.io/img/04-æ‰¹é‡æŸ¥è¯¢IPåœ°åŒº/UUåœ¨çº¿å·¥å…·æŸ¥IP.png)

> # æˆ‘è‡ªå·±å†™çš„æ‰¹é‡æŸ¥ IP çš„ VUE å‰ç«¯ç½‘é¡µï¼šï¼ˆå›½å®¶/åœ°åŒºï¼›ASNï¼›æ”¯æŒ IPv6ï¼›æŒ‰éœ€å¤åˆ¶ï¼‰ğŸ˜

![æ¼”ç¤º_1.png](https://ezxxy.github.io/img/04-æ‰¹é‡æŸ¥è¯¢IPåœ°åŒº/æ¼”ç¤º_1.png)
![æ¼”ç¤º_2.png](https://ezxxy.github.io/img/04-æ‰¹é‡æŸ¥è¯¢IPåœ°åŒº/æ¼”ç¤º_2.png)


# 2. Docker éƒ¨ç½²

&emsp;&emsp;æœ¬é¡¹ç›®å ç”¨ç©ºé—´å¾ˆå°ï¼ŒåŸºäºæœ€åŸºæœ¬çš„ Nginx é•œåƒï¼Œæ€»å…±åªæœ‰ 17.51 MBã€‚æˆ‘å»ºè®®å¤§å®¶ä½¿ç”¨ Docker-compose éƒ¨ç½²æœ¬é¡¹ç›®ï¼Œå½“ç„¶æˆ‘ä¼šè´´å‡º Docker run çš„é•¿å‘½ä»¤ã€‚æœ¬é¡¹ç›®æ”¯æŒæ˜¼å¤œæ¨¡å¼çš„å˜åŒ–ï¼Œé»˜è®¤è·Ÿéšç³»ç»Ÿã€‚ä½ å¯ä»¥éƒ¨ç½²ååˆ‡æ¢ç³»ç»Ÿçš„æ˜¼å¤œæ¨¡å¼çœ‹çœ‹ï¼Œä¼šè‡ªåŠ¨è·Ÿéšå…¶å‘ç”Ÿæ”¹å˜ã€‚

![Docker-Hub.jpg](https://ezxxy.github.io/img/04-æ‰¹é‡æŸ¥è¯¢IPåœ°åŒº/Docker-Hub.jpg)

&emsp;&emsp;å› ä¸ºä½¿ç”¨çš„æ˜¯ **ipinfo.io** çš„ **API**ï¼Œæ‰€ä»¥åœ¨å¼€å§‹éƒ¨ç½²ä¹‹å‰ï¼Œéœ€è¦å¤§å®¶ç™»å½• ã€[https://ipinfo.io/login](https://ipinfo.io/login)ã€‘ æŸ¥çœ‹è‡ªå·±è´¦å·çš„ TOKENï¼Œæ¯ä¸ªè´¦å·ä¸‹çš„ TOKEN æ¯ä¸ªæœˆå¯ä»¥æŸ¥è¯¢ **50000** æ¡ IPï¼Œå½“å‰ TOKEN ç”¨é‡çš„æŸ¥è¯¢ä¹Ÿåœ¨ [è¿™ä¸ªç½‘é¡µ](https://ipinfo.io/login) ã€‚

&emsp;&emsp;åœ¨ç½‘é¡µä¸­é€‰æ‹©ä½¿ç”¨ Google è´¦å·æˆ–è€… GitHub è´¦å·è¿›è¡Œç™»å½•ï¼Œæˆ–è€…é€‰ç”¨ä¸´æ—¶é‚®ç®±æ³¨å†Œç™»å½•éƒ½å¯ä»¥ã€‚ç™»å½•ä¹‹åä¸‹æ‹‰åˆ° **ã€Step 3ã€‘** çš„ä½ç½®ï¼Œå³å¯å¤åˆ¶è‡ªå·±çš„ TOKENï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

![ç™»å½•æŸ¥çœ‹token.jpg](https://ezxxy.github.io/img/04-æ‰¹é‡æŸ¥è¯¢IPåœ°åŒº/ç™»å½•æŸ¥çœ‹token.jpg)
![å¤åˆ¶è‡ªå·±çš„TOKEN.jpg](https://ezxxy.github.io/img/04-æ‰¹é‡æŸ¥è¯¢IPåœ°åŒº/å¤åˆ¶è‡ªå·±çš„TOKEN.jpg)

&emsp;&emsp;&emsp;æœ¬æœˆæˆ‘çš„æŸè´¦å·ä¸‹çš„ TOKEN ç”¨é‡æƒ…å†µå¦‚ä¸‹ï¼Œå·²ç»æŸ¥è¯¢äº† 4321 æ¡ï¼Œè¿˜å¯ä»¥æŸ¥è¯¢ 45679 æ¡ï¼š

![TOKENç”¨é‡æŸ¥è¯¢.jpg](https://ezxxy.github.io/img/04-æ‰¹é‡æŸ¥è¯¢IPåœ°åŒº/TOKENç”¨é‡æŸ¥è¯¢.jpg)

## &emsp; 2-1. ä½¿ç”¨ Docker-compose éƒ¨ç½²

&emsp;&emsp;&emsp;ç¡®ä¿è‡ªå·±å·²ç»å®‰è£…äº† Docker å’Œ Docker-composeï¼Œåœ¨ä»»æ„ä½ å–œæ¬¢çš„è·¯å¾„ä¸‹ï¼Œæ–°å»ºä¸€ä¸ª docker-compose.yml æ–‡ä»¶ã€‚è¯·æŠŠ **7845** æ¢æˆè‡ªå·±å–œæ¬¢ä¸”è¿˜æ²¡æœ‰è¢«å ç”¨çš„ç«¯å£ï¼Œå¹¶ä¸”æŠŠåˆšåˆšå¤åˆ¶çš„ **TOKEN** å€¼æ›¿æ¢æ‰ã€‚ä½ ä¹Ÿå¯ä»¥è‡ªå®šä¹‰ç½‘é¡µå†…å®¹æ‰€å å±å¹•çš„å®½åº¦ï¼Œä¸Šé¢æ¼”ç¤ºçš„æ•ˆæœæ‰€ä½¿ç”¨çš„æ¯”ä¾‹å°±æ˜¯é»˜è®¤çš„ **70%**ã€‚docker-compose.yml æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š

```
# ç”¨ä»€ä¹ˆæ–°å»ºæ–‡ä»¶éƒ½è¡Œï¼Œå¯ä»¥ä½¿ç”¨ nano
vim docker-compose.yml
```

```
version: '3.8'
services:
  vue-ip:
    image: ezxxy/vue-ip:latest
    restart: always
    ports:
      - "7845:7840"                 	# 7845 å¯ä»¥æ”¹æˆç›®å‰æ²¡æœ‰è¢«å ç”¨ä¸”è‡ªå·±å–œæ¬¢çš„ç«¯å£å·
    environment:
      - TOKEN=æ›¿æ¢ä¸ºåˆšåˆšå¤åˆ¶çš„ TOKEN    # TOKEN æ”¹æˆè‡ªå·± ipinfo.io è´¦å·ä¸‹çš„ï¼Œåˆšåˆšå¤åˆ¶çš„
      - WIDTH=70%                       # è‡ªå®šä¹‰ç½‘é¡µå†…å®¹å æ®å±å¹•çš„å®½åº¦ï¼Œçœ‹è‡ªå·±éœ€è¦ï¼Œä¸ç”¨æ”¹å°±è¡Œ
    container_name: ezxxy-vue-ip
```
```
docker-compose up -d
```

## &emsp; 2-2. ä½¿ç”¨ Docker run å‘½ä»¤éƒ¨ç½²

&emsp;&emsp;&emsp;ä¸æƒ³ç”¨ Docker-composeï¼Œè€Œæ˜¯æƒ³ç”¨ Docker ç›´æ¥éƒ¨ç½²çš„å°ä¼™ä¼´å¯ä»¥ä½¿ç”¨å¦‚ä¸‹çš„å‘½ä»¤ï¼Œè¯·æŠŠ **7845** æ”¹æˆè‡ªå·±å–œæ¬¢ä¸”æ²¡æœ‰è¢«å ç”¨çš„ç«¯å£å·ï¼ŒTOKEN ä¸­çš„å€¼è¯·ç”¨è‡ªå·±çš„ï¼š


```
docker run -d --restart=always -p 7845:7840 --name ezxxy-vue-ip -e "TOKEN=æ¢æˆè‡ªå·±åˆšåˆšå¤åˆ¶çš„TOKEN" -e "WIDTH=70%" ezxxy/vue-ip:latest
```
&emsp;

# 3. å¼€æ”¾ç«¯ã€å¹¶é…ç½®åå‘ä»£ç†ï¼Œç”¨åŸŸåè§£æå¹¶å¼€å¯ https è®¿é—®


```
# å¦‚æœä½ ç”¨çš„æ˜¯ ufw ç®¡ç†é˜²ç«å¢™ï¼Œå¼€æ”¾ä¸Šé¢çš„è®¾ç½®çš„ç«¯å£
ufw allow 7845
ufw reload
```

&emsp;&emsp;è¿™æ ·ä½ å°±å¯ä»¥ä½¿ç”¨ ã€[http://æœåŠ¡å™¨çš„å…¬ç½‘IP:7845](http://æœåŠ¡å™¨çš„å…¬ç½‘IP:7845)ã€‘ æ¥è®¿é—®äº†ã€‚å¦‚æœæƒ³è¦é…ç½®åå‘ä»£ç†ï¼Œå¯ä»¥ä½¿ç”¨ **Nginx Proxy Manager**ã€å®å¡”é¢æ¿åå‘ä»£ç†ã€æ‰‹æ“ Nginx ç­‰ã€‚ä¸‹é¢æ¼”ç¤ºçš„æ˜¯ç”¨ NPM æ¥é…ç½®åå‘ä»£ç†ï¼ˆè¿™ä¸ªå¾ˆå¥½ç”¨ï¼Œåœ¨ä¸€å°æœºå™¨ä¸Šéƒ¨ç½²äº† NPMï¼Œå¯ä»¥ç»™ä»»æ„æœºå™¨ä¸Šçš„ç«™ç‚¹é…ç½® SSL è¯ä¹¦å¹¶ä½¿ç”¨åŸŸåå¼€å¯ https è®¿é—®ï¼‰ã€‚æ­å»ºçš„é“¾æ¥å‚è€ƒ ã€[æ­¤ BiliBili è§†é¢‘](https://www.bilibili.com/video/BV1Gg411w7kQ)ã€‘


![NPM_1.jpg](https://ezxxy.github.io/img/04-æ‰¹é‡æŸ¥è¯¢IPåœ°åŒº/NPM_1.jpg)
![NPM_2.jpg](https://ezxxy.github.io/img/04-æ‰¹é‡æŸ¥è¯¢IPåœ°åŒº/NPM_2.jpg)

> # &emsp; ğŸ¥° æˆ‘çš„æ¼”ç¤ºç«™ç‚¹ï¼š[https://ip.ezxxy.me](https://ip.ezxxy.me)

![ç½‘é¡µ.jpg](https://ezxxy.github.io/img/04-æ‰¹é‡æŸ¥è¯¢IPåœ°åŒº/ç½‘é¡µ.jpg)


